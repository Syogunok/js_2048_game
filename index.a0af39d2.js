var e=document.querySelector(".game-field"),r=document.querySelector(".start"),t=document.querySelector(".game-score"),n=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),a=document.querySelector(".message-start"),c=[],i=0,s=!1;function u(){c=[];for(var e=0;e<4;e++){var r=[,,,,].fill(0);c.push(r)}}function d(){for(var e=[],r=0;r<4;r++)for(var t=0;t<4;t++)0===c[r][t]&&e.push({x:r,y:t});if(e.length>0){var n=e[Math.floor(Math.random()*e.length)];c[n.x][n.y]=Math.random()>.1?2:4}}function l(){e.querySelectorAll(".field-cell").forEach(function(e,r){var t=c[Math.floor(r/4)][r%4];e.textContent=0===t?"":t,e.className="field-cell field-cell--".concat(t)})}function f(){for(var e=!1,r=0;r<4;r++)!function(r){for(var t=c[r].filter(function(e){return 0!==e}),n=[],o=0;o<t.length;o++)t[o]===t[o+1]?(n.push(2*t[o]),i+=2*t[o],o++,e=!0):n.push(t[o]);for(;n.length<4;)n.push(0);c[r].toString()!==n.toString()&&(e=!0),c[r]=n}(r);return e}function h(){c.forEach(function(e){return e.reverse()});var e=f();return c.forEach(function(e){return e.reverse()}),e}function v(e){return e[0].map(function(r,t){return e.map(function(e){return e[t]})})}function m(e){if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){var r,a,s=!1;switch(e.key){case"ArrowLeft":s=f();break;case"ArrowRight":s=h();break;case"ArrowUp":c=v(c),r=f(),c=v(c),s=r;break;case"ArrowDown":c=v(c),a=h(),c=v(c),s=a}if(s&&(d(),l(),t.textContent=i,function(){var e=!0,r=!1,t=void 0;try{for(var o,a=c[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)if(o.value.includes(2048))return n.classList.remove("hidden"),document.removeEventListener("keydown",m),!0}catch(e){r=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}return!1}()||!(c.some(function(e){return e.includes(0)})||function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(e<3&&c[e][r]===c[e+1][r]||r<3&&c[e][r]===c[e][r+1])return!0;return!1}())&&(o.classList.remove("hidden"),document.removeEventListener("keydown",m),1)))return 0}}function y(){i=0,u(),d(),d(),l(),document.addEventListener("keydown",m),r.classList.remove("start"),r.classList.add("restart"),r.textContent="Restart",n.classList.add("hidden"),o.classList.add("hidden")}r.addEventListener("click",function(){a.classList.contains("hidden")||a.classList.add("hidden"),y()}),r.addEventListener("click",function(){s?(i=0,t.textContent=i,u(),d(),d(),l(),n.classList.add("hidden"),o.classList.add("hidden")):(y(),s=!0)});
//# sourceMappingURL=index.a0af39d2.js.map
